<?xml version="1.0"?>
<!-- <!DOCTYPE macker PUBLIC "-//innig//DTD Macker 0.2//EN" "http://innig.net/macker/src/macker.dtd"> -->

<macker>

    <ruleset name="Macker internal rules">
    
<!--        <var name="basepkg" value="net.innig.macker" /> -->
        
        <pattern name="macker" regex="${basepkg}.**" />
        
        <pattern name="structure">
            <include pattern="macker">
                <include regex="*.structure.**" />
            </include>
        </pattern>

        <pattern name="rule">
            <include pattern="macker">
                <include regex="*.rule.**" />
            </include>
        </pattern>
        
        <pattern name="event">
            <include pattern="macker">
                <include regex="*.event.**" />
            </include>
        </pattern>
        
        <pattern name="main">
            <include pattern="macker">
                <exclude regex="${basepkg}.*.**" />
            </include>
        </pattern>
        
        <pattern name="exception">
            <include regex="**Exception" />
        </pattern>
        
        <access-rule>
            <deny>
                <from>
                    <include pattern="structure" />
                </from>
                <to>
                    <include pattern="rule" />
                    <include pattern="event" />
                </to>
            </deny>
        </access-rule>

        <foreach var="type-class" regex="(**Type)">
            <access-rule>
                <deny>
                    <from regex="${type-class}" />
                    
                    <allow><to regex="java.**" /></allow>
                    <allow><to regex="javax.**" /></allow>
                    <allow><to regex="net.innig.util.EnumeratedType" /></allow>
                </deny>
            </access-rule>
        </foreach>

        <foreach var="exception" regex="(**Exception)">
            <message>Ahoy! ${exception}</message>
        </foreach>

    </ruleset>


    <ruleset name="Stupid test ruleset" severity="info">
        <subset regex="**Class*" />
            <access-rule>
                <deny>
                    <from regex="net.innig.macker.**" />
                    <to regex="java.lang.Object" />
                </deny>
            </access-rule>
        
        <ruleset name="Inner stupid test ruleset">
            <subset regex="**.structure.*" />
            <access-rule severity="warning">
                <deny>
                    <from regex="net.innig.macker.**" />
                    <to regex="java.lang.Object" />
                </deny>
            </access-rule>
        </ruleset>
    </ruleset>

</macker>


